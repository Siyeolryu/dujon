# Red Team UI/UX 점검 보고서

**점검일**: 2026-02-04  
**대상**: 현장배정 관리 시스템 (Streamlit 앱)  
**관점**: 사용자 경험·일관성·접근성·반응형·시각 계층·오류 방지

---

## 1. 치명적 이슈 (즉시 조치 권장)

### 1.1 상단 네비게이션 링크 URL 불일치

- **현상**: `theme.py`의 `render_top_nav()`에서 사용하는 `href`가 **Streamlit 멀티페이지 실제 URL과 다를 가능성**이 있음.
- **현재**: `/대시보드`, `/현장_목록`, `/현장등록`, `/자격증등록`, `/투입가능인원_상세`
- **Streamlit 규칙**: `pages/` 내 파일명 기준으로 URL이 생성됨. 예: `1_대시보드.py` → 경로가 `1_대시보드`일 수 있음 (버전에 따라 숫자 제거 여부 상이).
- **위험**: 링크 클릭 시 404 또는 잘못된 페이지로 이동해 **전체 네비게이션 신뢰도 하락**.
- **권장**:  
  - 실제 배포 URL 확인 후 `href`를 **실제 경로**와 일치시키기.  
  - 가능하면 `st.page_link` 등 Streamlit 공식 네비게이션 사용 검토.

### 1.2 홈 페이지와 서브 페이지의 네비게이션 이중 렌더

- **현상**: `app_streamlit.py`(홈)와 모든 `pages/*.py`에서 각각 `render_top_nav()` 호출. **현재 홈에는 페이지 목록만 있고**, 사이드바는 숨김 처리되어 있어, 사용자는 “상단 메뉴에서 페이지 선택”만 안내받음.
- **위험**:  
  - 홈과 서브 페이지 간 **정보 구조가 다르게 느껴질 수 있음**.  
  - 상단 네비가 **현재 페이지 강조(active state) 없음** → “지금 어디인지” 한눈에 안 들어옴.
- **권장**:  
  - 상단 네비에 **현재 페이지 표시**(예: 배경색/굵게) 적용.  
  - 홈과 서브 페이지에서 동일한 네비 컴포넌트·같은 위치에 노출되도록 통일.

### 1.3 현장 목록 테이블: “테이블”이 아닌 반복 블록

- **현상**: `2_현장_목록.py`에서 테이블을 **`st.columns` + 반복문**으로 구현. 시각적으로는 행/열처럼 보이지만, **실제로는 독립 블록 나열**이라 셀 정렬·너비가 column 비율에만 의존하고, **헤더와 본문 열 정렬이 어긋나기 쉬움**.
- **위험**:  
  - 스크롤 시 헤더 고정 없음.  
  - 화면 크기/폰트에 따라 **헤더와 데이터 열이 밀림** → 가독성·신뢰도 저하.
- **권장**:  
  - `st.dataframe`(또는 `st.data_editor`)로 목록을 표시하고, “배정/해제/상세/복사”는 **행별 버튼이 아닌** “선택 행 + 상단 액션 버튼” 또는 **한 컬럼에 아이콘/버튼**으로 넣는 방식 검토.  
  - 또는 **헤더를 고정**하는 커스텀 HTML/컴포넌트 사용.

---

## 2. 일관성·디자인 시스템

### 2.1 페이지별 인라인 CSS 중복

- **현상**: `2_현장_목록.py`, `3_현장등록.py`, `4_자격증등록.py` 등에서 **동일/유사한 스타일**이 각 페이지의 `st.markdown("""<style>...</style>""")`에 반복됨.  
  예: `.required-section-title`, `.optional-section-title`, `.tab-select-label`, `[data-testid="stRadio"]` 탭 스타일.
- **위험**:  
  - 한쪽만 수정 시 **다른 페이지와 시각적 불일치** 발생.  
  - 유지보수 비용 증가.
- **권장**:  
  - **공통 탭/폼/필터 스타일**을 `streamlit_utils/theme.py`의 `LOCALHOST_CSS`(또는 별도 CSS 블록)로 올리고, 페이지에서는 **인라인 스타일 제거 또는 최소화**.

### 2.2 탭(라디오) 강조색 불일치

- **현상**:  
  - **theme.py**: 라디오 선택 시 `#3b82f6` (파란색).  
  - **일부 페이지 인라인 CSS**: 동일하게 `#3b82f6` 사용.  
  - **버튼/CTA**: theme에서 `#495057` (회색).  
  - 즉, **“선택된 탭”은 파란색, “제출 버튼”은 회색**이라 **주요 액션(CTA)과 선택 상태 색이 혼재**.
- **위험**: 브랜드/시각 계층이 흐려지고, “어디를 눌러야 할지”가 덜 명확해짐.
- **권장**:  
  - **주요 액션(등록, 배정, 저장)**은 한 색(예: primary 파란 또는 theme primaryColor).  
  - **필터/탭 선택**은 그보다 낮은 계층(회색·보조색)으로 통일하거나, 반대로 “탭 = primary, 버튼 = secondary”로 한 번 정한 뒤 전역 적용.

### 2.3 폼 최대 너비만 적용, 상단 네비·타이틀은 전체 너비

- **현상**: theme에서 `[data-testid="stForm"]`에만 `max-width: 800px` 적용.  
  반면 **타이틀·캡션·상단 네비**는 전체 너비.  
  대시보드 메트릭/차트는 column으로 넓게 쓰고 있음.
- **위험**:  
  - “폼 페이지”와 “목록/대시보드 페이지”의 **콘텐츠 너비가 제각각**이라 레이아웃 일관성이 떨어짐.
- **권장**:  
  - “폼/입력 중심 페이지”는 **타이틀+폼 전체**를 하나의 max-width 컨테이너로 감싸거나,  
  - 전역적으로 “메인 콘텐츠 최대 너비”를 정해 두고 예외만 넓게 쓰기.

---

## 3. 사용성(UX)

### 3.1 현장 목록: 배정 패널 위치·노출

- **현상**: 배정 UI는 **메인 영역**에 `assign-panel-box`로 구현되어 있으나, **페이지네이션·툴바 아래**에 렌더링됨.  
  “배정” 클릭 후 **목록 위쪽**에 패널이 오지 않고, **현장 목록 테이블 위 한 구간**에만 나타남.  
  스크롤 위치에 따라 **패널이 화면 밖에 있어** 사용자가 놓치기 쉬움.
- **위험**: “배정하기” 폼을 찾지 못하고 이탈하거나, 취소만 누르고 끝낼 수 있음.
- **권장**:  
  - 배정 패널을 **필터/페이지네이션 바로 아래(목록 위)** 고정하거나,  
  - **st.expander("📌 소장 배정", expanded=True)** 로 감싸 상단에 두어, 배정 모드일 때 항상 눈에 띄게 하기.

### 3.2 에러/성공 메시지 후 피드백 부족

- **현상**: 등록 성공 시 `st.success` + `st.info`(부여된 ID)만 표시.  
  **폼 초기화·다음 행동 안내**(예: “다른 현장 등록”, “현장 목록 보기”)가 없음.
- **위험**: 사용자가 “다음에 뭘 해야 하지?”에서 멈출 수 있음.
- **권장**:  
  - 성공 시 **짧은 안내 문구**(예: “현장 목록에서 확인하세요”) 또는 **링크/버튼** 제공.  
  - 필요 시 **폼 초기화** 버튼 노출.

### 3.3 현장 목록 페이지네이션·필터 위치

- **현상**: “페이지당 항목 수” 선택, “이전/다음”, “총 N개”가 **목록 위쪽**에만 있음.  
  목록이 길면 **아래로 스크롤한 뒤 다시 위로 올라가야** 페이지 전환이 가능.
- **권장**:  
  - 목록 **하단**에도 동일한 페이지네이션 컨트롤 복제.  
  - 또는 “맨 위로” 버튼 등으로 빠르게 위로 이동할 수 있게 하기.

### 3.4 투입가능 인원 상세: 정보 과다·스캔 어려움

- **현상**: expander 안에 **인원 정보 + 자격증 테이블**을 2열로 나열.  
  필드가 많고, 모든 항목이 동일한 시각적 무게로 나열됨.
- **위험**:  
  - “현재상태”, “현재담당현장수”, “보유자격증” 등 **핵심만 강조**되지 않아 **한눈에 스캔하기 어려움**.
- **권장**:  
  - **핵심 필드**(이름, 직책, 현재상태, 담당 현장 수)는 상단 요약 카드/강조,  
  - 상세 필드는 접이식 또는 탭으로 구분.  
  - 자격증은 테이블 유지하되, 컬럼 수 최소화(자격증명, 유효기간, 사용가능여부 등).

### 3.5 대시보드 메트릭 카드: 클릭 불가

- **현상**: 로컬호스트 HTML에서는 “전체 현장 / 미배정 / 배정완료” 등 **카드 클릭 시 필터 연동**이 있음.  
  Streamlit 대시보드는 **숫자만 표시**하고 클릭 동작 없음.
- **위험**:  
  - “미배정 5건”을 보고 **바로 현장 목록(미배정 필터)으로 가고 싶어도** 한 단계 더 메뉴 이동해야 함.
- **권장**:  
  - 메트릭을 **버튼/링크**로 만들거나, 클릭 시 `st.query_params`로 필터 적용된 현장 목록 페이지로 이동.

---

## 4. 접근성·반응형

### 4.1 라디오 탭: 키보드·포커스

- **현상**: 탭 형태 라디오에 **포커스 링크(아웃라인)** 스타일이 theme/인라인 CSS에 명시되어 있지 않음.  
  `:focus-visible` 등으로 키보드 사용자 구분도 없음.
- **권장**:  
  - `[data-testid="stRadio"] label:focus-visible`에 **명확한 outline** (예: 2px solid primary) 적용.  
  - 가능하면 **스킵 링크**(본문/필터/테이블로 건너뛰기) 추가 검토.

### 4.2 작은 화면(모바일) 대응 부재

- **현상**:  
  - 필터가 **4열** 고정.  
  - 현장 목록 행도 **8열** 고정.  
  - **미디어 쿼리나 column 비율 조정**이 전혀 없음.
- **위험**:  
  - 작은 화면에서 **가로 스크롤·겹침·잘림** 발생.  
  - 필터 탭이 여러 줄로 부스스하게 떨어질 수 있음.
- **권장**:  
  - 768px 이하 등에서 **필터를 1~2열**로 줄이기.  
  - 테이블은 **카드형 목록**으로 전환하거나, `st.dataframe`으로 넘겨 가로 스크롤만 허용하고 헤더는 유지.

### 4.3 색 대비

- **현상**: 캡션/보조 텍스트가 `#6c757d`, 배경 `#F8F9FA`.  
  대비비는 대체로 괜찮지만, **비활성/disabled** 버튼이 `opacity: 0.5`만 적용되어 **배경과 구분이 약할 수 있음**.
- **권장**:  
  - WCAG 2.1 AA 기준으로 **텍스트/버튼 대비** 확인.  
  - disabled 상태는 **색상 변경**(예: 회색 톤)으로 보완.

---

## 5. 오류 방지·입력 검증

### 5.1 날짜 필드가 전부 텍스트

- **현상**: 현장등록/자격증등록에서 **건축허가일, 착공예정일, 준공일, 취득일, 유효기간** 등이 `st.text_input(placeholder='YYYY-MM-DD')`로만 되어 있음.
- **위험**:  
  - “2024/01/15”, “24-1-1” 등 **잘못된 형식** 입력 시 서버/DB에서만 에러 발생.  
  - 사용자에게 **즉각적인 검증 피드백**이 없음.
- **권장**:  
  - `st.date_input`으로 교체하거나,  
  - 텍스트 입력이면 **on-submit 또는 on-blur**에서 정규식/날짜 파싱 검증 후 `st.error` 표시.

### 5.2 필터 초기화 시 세션 키 불일치

- **현상**: 현장 목록에서 필터 초기화 시 `filter_company_radio`, `filter_status_radio`, `filter_state_radio` 등 **radio key**를 초기화하지만, Streamlit은 **위젯 key와 세션 상태를 1:1로 묶어주지 않을 수 있음**.  
  (초기값을 `index=0`으로 주면 되지만, `st.rerun()` 후에도 값이 유지되는지 환경별로 확인 필요.)
- **권장**:  
  - 초기화 시 **명시적으로 해당 key에 해당하는 값**을 세션에 넣은 뒤 `st.rerun()`.  
  - 또는 “필터 초기화”를 **쿼리 파라미터 제거 + 리다이렉트**로 처리해 상태를 완전히 리셋.

---

## 6. 기타

### 6.1 홈 페이지 정보 과다

- **현상**: 홈에 “사용 가능한 페이지” 목록이 마크다운으로 나열.  
  **상단 네비와 내용이 중복**.
- **권장**:  
  - 홈은 **한 줄 안내 + 바로가기 카드/버튼** 정도로 단순화.  
  - 상세 설명은 “도움말” 또는 “시작하기” 페이지로 분리.

### 6.2 자격증등록 “추가등록” 부재

- **현상**: 로컬호스트 HTML에는 자격증 종류에 “+추가등록” 탭이 있어 **사용자 정의 자격증명** 입력이 가능한데, Streamlit 자격증등록에는 **건설초급/중급/고급/특급만** 있음.
- **위험**:  
  - 다른 자격증을 써야 하는 사용자 플로우가 **차단**됨.
- **권장**:  
  - “기타” 또는 “직접 입력” 옵션 추가 시 **텍스트 입력 필드** 노출.

### 6.3 페이지 제목 중복

- **현상**: 상단 네비 옆(또는 아래)에 **페이지별 제목**(예: “📋 현장 목록”)이 다시 나옴.  
  네비에서 이미 “현장 목록”을 선택했으므로, **제목을 부제목으로 낮추거나** 한 번만 강조하는 편이 나을 수 있음.
- **권장**:  
  - 제목을 **H2 또는 작은 헤더**로 통일하거나,  
  - “현장 목록” 페이지에서는 “필터 및 검색”을 실질적 첫 헤딩으로 두는 등 **정보 계층** 정리.

---

## 7. 요약 체크리스트

| 구분 | 항목 | 심각도 | 비고 |
|------|------|--------|------|
| 네비 | 상단 링크 URL이 실제 경로와 일치하는지 검증 | 높음 | 404 방지 |
| 네비 | 현재 페이지 강조(active state) | 중간 | 위치 인지 |
| 목록 | 배정 패널을 목록 상단/고정 위치로 노출 | 중간 | 이탈 방지 |
| 목록 | 테이블을 st.columns 반복으로 구현 → 정렬/고정 문제 | 중간 | dataframe 또는 고정 헤더 |
| 공통 | 탭/폼 스타일을 theme으로 이전해 일관성 확보 | 중간 | 유지보수 |
| 공통 | 탭(선택) vs 버튼(CTA) 색상 체계 통일 | 낮음 | 디자인 시스템 |
| 폼 | 날짜 필드 date_input 또는 클라이언트 검증 | 중간 | 오류 방지 |
| 대시보드 | 메트릭 카드 클릭 시 필터/페이지 이동 | 낮음 | UX 개선 |
| 접근성 | 포커스 스타일, 반응형(모바일) | 중간 | 접근성·호환성 |
| 자격증 | “기타/직접입력” 자격증 종류 옵션 | 낮음 | 기능 완성도 |

---

**결론**:  
네비게이션 URL·배정 UI 노출·테이블 구조·스타일 일원화·날짜 검증·현재 페이지 표시를 우선 처리하고, 이어서 대시보드 클릭 연동·반응형·접근성·자격증 “기타” 옵션을 단계적으로 적용하는 것을 권장합니다.

# 프론트엔드 개발 단계별 계획

**작성일**: 2026년 1월 30일  
**대상**: Phase 2-3단계 HTML 앱 개선 및 이후 프론트엔드 고도화  
**전제**: Phase 2-2단계 REST API 서버 완료 후 진행

---

## 📋 현황 요약

| 항목 | 현재 | 목표 |
|------|------|------|
| 데이터 소스 | `data.js` 정적 배열 | REST API 실시간 조회 |
| 현장 목록/상세 | 클라이언트 필터링 | API 필터 + 서버 응답 |
| 소장/자격증 배정 | UI 없음 | 배정 패널 + API 호출 |
| 로딩/에러 처리 | 없음 | 로딩 스피너, 에러 메시지 |
| 지도 | 캔버스 플레이스홀더 | (선택) 카카오맵/Google Maps 연동 |

---

## 🗂️ 단계별 계획

### 1단계: API 연동 기반 구축 (선행)

**목표**: 정적 데이터를 API 호출로 전환하고, 한 곳에서 데이터를 관리할 수 있게 한다.

**선행 조건**: REST API 서버(`/api/sites`, `/api/personnel`, `/api/certificates` 등) 가동 중

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 1-1 | API 클라이언트 모듈 | `api.js` 신규 작성. `fetch` 기반 `getSites()`, `getSite(id)`, `getPersonnel()`, `getCertificates()`, `getStats()` 래퍼 함수 | 2시간 |
| 1-2 | 환경 설정 | API Base URL을 상수 또는 환경 변수로 관리 (예: `const API_BASE = 'http://localhost:5000'`) | 0.5시간 |
| 1-3 | data.js 역할 변경 | `sitesData` 직접 참조 제거. 앱 초기 로딩 시 `getSites()` 호출 후 반환 데이터를 앱 상태(변수)에 저장 | 1시간 |
| 1-4 | app.js 연동 | `getFilteredSites()`가 API에서 받은 데이터를 사용하도록 수정. 필요 시 필터는 클라이언트 유지 또는 API 쿼리 파라미터로 전달 | 1.5시간 |
| 1-5 | 상세 조회 API 연동 | 현장 클릭 시 `getSite(id)` 호출하여 상세 패널에 표시 (또는 목록 데이터로 대체) | 1시간 |

**산출물**
- `api.js`: API 호출 전담 모듈
- `app.js`, `data.js`: API 기반 데이터 사용으로 수정
- (선택) `index.html` 또는 단일 진입점에서 `api.js` 로드

**완료 기준**
- 페이지 로드 시 API로 현장 목록 조회 후 지도/테이블/통계에 반영
- 현장 클릭 시 해당 현장 상세 정보가 API 데이터로 표시

---

### 2단계: 로딩·에러 처리 및 사용성

**목표**: API 대기 중 로딩 표시, 실패 시 메시지 표시, 빈 데이터 처리.

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 2-1 | 로딩 UI | 초기 로드 시 지도/테이블 영역에 스피너 또는 스켈레톤 표시. API 완료 시 제거 | 1시간 |
| 2-2 | 에러 메시지 | `api.js`에서 `fetch` 실패/4xx·5xx 시 사용자용 메시지 반환. 화면에 토스트 또는 인라인 메시지로 표시 | 1.5시간 |
| 2-3 | 재시도/새로고침 | 에러 시 "다시 시도" 버튼 제공하여 동일 API 재호출 | 0.5시간 |
| 2-4 | 빈 데이터 | 현장 0건일 때 "등록된 현장이 없습니다" 등 문구 표시 | 0.5시간 |

**산출물**
- `style.css`: 로딩/에러/빈 상태용 스타일
- `app.js`: 로딩/에러/빈 상태 분기 처리
- (선택) `api.js`: 에러 메시지 포맷 표준화

**완료 기준**
- 로딩 중에는 로딩 UI만 보이고, 성공 시 데이터 UI, 실패 시 에러 메시지와 재시도 가능

---

### 3단계: 소장·자격증 배정 UI

**목표**: 미배정 현장 클릭 시 배정 패널을 띄우고, 투입 가능 소장/자격증 목록에서 선택해 API로 배정한다.

**선행 조건**: 1단계 완료, `POST /api/sites/{id}/assign` 등 배정 API 사용 가능

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 3-1 | 배정 패널 마크업 | 상세 패널 내부 또는 별도 슬라이드에 "소장 배정", "자격증 배정" 섹션. 드롭다운 또는 리스트로 소장/자격증 선택 | 2시간 |
| 3-2 | 미배정 시 배정 버튼 노출 | 현장 상세에서 `status === '미배정'`일 때만 "소장 배정하기" 버튼 표시. 클릭 시 배정 패널 열기 | 0.5시간 |
| 3-3 | 투입 가능 목록 표시 | 배정 패널 열릴 때 `getPersonnel()`, `getCertificates()` 호출. 필터(투입가능 등) 적용 후 드롭다운/리스트에 표시 | 1.5시간 |
| 3-4 | 배정 API 호출 | 소장/자격증 선택 후 "배정" 버튼 클릭 시 `POST /api/sites/{id}/assign` 호출. 요청 body는 API 스펙에 맞게 구성 | 1.5시간 |
| 3-5 | 배정 후 화면 갱신 | 배정 성공 시 상세 패널 데이터 갱신(해당 현장 재조회 또는 목록에서 해당 항목 업데이트), 통계 재계산, 지도/테이블 리렌더 | 1시간 |
| 3-6 | 배정 해제 (선택) | "배정 해제" 버튼 및 `POST /api/sites/{id}/unassign` 연동 | 1시간 |

**산출물**
- `site-management.html`: 배정 패널 HTML
- `style.css`: 배정 패널 스타일
- `app.js`: 배정 플로우(열기 → 목록 로드 → 선택 → API 호출 → 갱신)
- `api.js`: `assignSite(id, payload)`, (선택) `unassignSite(id)` 추가

**완료 기준**
- 미배정 현장 선택 → 배정 패널에서 소장/자격증 선택 → 배정 후 목록/상세/통계가 즉시 반영

---

### 4단계: 리스트·필터 고도화

**목표**: 테이블 정렬, 검색, API와 연동된 필터로 사용성을 높인다.

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 4-1 | 테이블 정렬 | 현장 목록 테이블 헤더 클릭 시 현장명/회사/착공예정/상태 등 기준으로 오름차순·내림차순 토글 | 1.5시간 |
| 4-2 | 검색창 | 현장명/주소 기준 검색 입력창. 입력 시 클라이언트 필터 또는 API 쿼리 파라미터로 목록 갱신 | 1시간 |
| 4-3 | API 필터 연동 (선택) | 회사/배정상태 등을 API 쿼리(`?company=종합&status=미배정`)로 보내고, 서버에서 필터된 결과만 받기 | 1시간 |
| 4-4 | 페이지네이션 (선택) | 현장 수가 많을 때 API에서 `limit`/`offset` 또는 cursor 기반 페이지네이션 지원 시 프론트에서 페이지 버튼/무한 스크롤 구현 | 2시간 |

**산출물**
- `app.js`: 정렬/검색/필터 로직
- `site-management.html`: 검색 입력, (선택) 페이지네이션 UI
- `api.js`: (선택) 쿼리 파라미터 추가

**완료 기준**
- 테이블 정렬 및 검색으로 원하는 현장을 빠르게 찾을 수 있음

---

### 5단계: UI/UX 정리 및 접근성

**목표**: 시각적 일관성, 반응형, 키보드/스크린리더 대응을 정리한다.

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 5-1 | 상태별 색상 통일 | 배정완료/미배정, 건축허가/착공예정/준공 등 상태 태그 색상을 조건부 서식 가이드와 유사하게 통일 (#d9ead3, #f4cccc 등) | 1시간 |
| 5-2 | 반응형 레이아웃 | 패널/테이블/필터가 작은 화면에서도 사용 가능하도록 미디어 쿼리 및 플렉스/그리드 조정 | 1.5시간 |
| 5-3 | 버튼·링크 포커스 | 주요 버튼/닫기/배정 버튼에 `:focus-visible` 스타일 적용 | 0.5시간 |
| 5-4 | ARIA/시맨틱 (선택) | 패널에 `role`, `aria-label`, `aria-expanded` 등 추가하여 스크린 리더 사용성 개선 | 1시간 |

**산출물**
- `style.css`: 색상 변수, 미디어 쿼리, 포커스 스타일, (선택) ARIA 대응
- `site-management.html`: (선택) ARIA 속성

**완료 기준**
- 모바일/태블릿에서도 필수 기능 사용 가능, 상태 색상이 문서와 일치

---

### 6단계: 지도 연동 (선택)

**목표**: 현재 캔버스 플레이스홀더를 실제 지도 API로 교체한다.

| 순서 | 작업 | 상세 | 예상 시간 |
|------|------|------|----------|
| 6-1 | 지도 API 선정 | 카카오맵 또는 Google Maps JavaScript API 중 선택. 키 발급 및 도메인 제한 설정 | 0.5시간 |
| 6-2 | 지도 초기화 | 선택한 API로 지도 div에 지도 렌더. 중심/줌 레벨은 현장 좌표 범위로 자동 설정 | 1.5시간 |
| 6-3 | 마커 표시 | API에서 받은 현장 목록으로 마커 생성. 배정/미배정에 따라 마커 색상 또는 아이콘 구분 | 1시간 |
| 6-4 | 마커 클릭 → 상세 | 마커 클릭 시 기존 상세 패널 열기 및 해당 현장 데이터 표시 | 0.5시간 |

**산출물**
- `app.js`: 지도 초기화 및 마커 로직 (캔버스 코드 대체 또는 분기)
- `site-management.html`: 지도 API 스크립트 로드 (키는 환경별 설정 권장)
- (선택) `map.js`: 지도 전용 모듈로 분리

**완료 기준**
- 현장이 실제 지도 위 마커로 표시되고, 마커 클릭 시 상세 패널이 열림

---

## 📅 권장 진행 순서

```
1단계(API 연동) → 2단계(로딩·에러) → 3단계(배정 UI) → 4단계(리스트·필터) → 5단계(UI/UX)
                                                                              ↑
6단계(지도) ──────────────────────────────────────────────────────────────── (병렬 또는 이후)
```

- **Phase 2-3 최소 목표**: 1단계 + 2단계 + 3단계 완료  
- **고도화**: 4단계, 5단계, 6단계는 일정에 따라 순차 또는 병렬 진행

---

## 📁 예상 파일 변경 요약

| 파일 | 1단계 | 2단계 | 3단계 | 4단계 | 5단계 | 6단계 |
|------|-------|-------|-------|-------|-------|-------|
| `api.js` (신규) | ● | ● | ● | ○ | - | - |
| `data.js` | ● | - | - | ○ | - | - |
| `app.js` | ● | ● | ● | ● | ○ | ● |
| `site-management.html` | ○ | ○ | ● | ○ | ○ | ○ |
| `style.css` | ○ | ● | ● | ○ | ● | ○ |
| `map.js` (선택) | - | - | - | - | - | ● |

● 필수 반영, ○ 부분 반영

---

## ✅ 단계별 완료 체크리스트

### 1단계
- [ ] `api.js` 작성 및 `getSites`, `getSite`, `getPersonnel`, `getCertificates`, `getStats` 구현
- [ ] 앱 초기 로딩 시 API로 현장 목록 조회
- [ ] 지도/테이블/통계가 API 데이터로 동작
- [ ] 현장 클릭 시 상세 정보가 API 데이터로 표시

### 2단계
- [ ] 로딩 중 스피너/스켈레톤 표시
- [ ] API 실패 시 에러 메시지 및 재시도 버튼
- [ ] 현장 0건 시 빈 상태 메시지

### 3단계
- [ ] 미배정 현장에서 "소장 배정하기" 노출
- [ ] 배정 패널에서 투입 가능 소장/자격증 목록 표시
- [ ] 배정 API 호출 후 목록/상세/통계 갱신

### 4단계
- [ ] 테이블 헤더 클릭 정렬
- [ ] 현장명/주소 검색 동작

### 5단계
- [ ] 상태별 색상 통일
- [ ] 반응형 레이아웃 적용

### 6단계 (선택)
- [ ] 지도 API 연동 및 마커 표시
- [ ] 마커 클릭 시 상세 패널 연동

---

*이 문서는 Phase 2-3단계 및 이후 프론트엔드 작업 시 단계별로 참고하여 사용할 수 있습니다.*

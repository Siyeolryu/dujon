# Phase 2 개발 착수 보고서

## 📋 보고서 정보

**프로젝트명**: 현장배정 관리 시스템 - Phase 2 개발  
**보고일**: 2026년 1월 6일  
**담당**: 개발팀  
**승인**: 대기 중

---

## 🎯 Executive Summary

### Phase 1 성과
- Google Sheets API 연동 완료
- 1,182개 셀 데이터 업로드 성공
- 3개 시트 데이터베이스 구축 완료
- 100% 업로드 성공률 달성

### Phase 2 목표
**"Google Sheets를 완전한 실시간 데이터베이스로 전환하고, HTML 앱과 양방향 연동"**

---

## 📊 현황 분석

### 현재 시스템 구조

```
[현재 상태]
CSV 파일 → Python 스크립트 → Google Sheets
                                    ↓
                              (수동 조회)
                                    ↓
                              HTML 앱 (정적)

[문제점]
❌ 데이터 수동 입력 시 오류 가능성
❌ HTML 앱이 정적 데이터 사용
❌ 실시간 업데이트 불가
❌ 앱에서 데이터 수정 불가
```

### 목표 시스템 구조

```
[목표 상태]
Google Sheets (DB) ←→ Flask API Server ←→ HTML 앱
       ↓                      ↓                ↓
   자동 검증             실시간 동기화      직접 수정
   조건부 서식           REST API          소장 배정
   VLOOKUP             WebSocket          실시간 반영

[개선점]
✅ 데이터 검증 자동화
✅ 실시간 데이터 연동
✅ 양방향 데이터 수정
✅ 다중 사용자 지원
```

---

## 🚀 Phase 2 개발 범위

### 1️⃣ Google Sheets 고급 기능 구현

#### A. 데이터 검증 규칙 (Data Validation)
**목적**: 잘못된 데이터 입력 방지

**적용 대상**:
- 현장정보: 회사구분, 현장상태, 배정상태
- 인력풀: 직책, 현재상태
- 자격증풀: 사용가능여부

**예상 효과**:
- 데이터 일관성 100% 유지
- 입력 오류 90% 감소
- 데이터 품질 향상

**개발 파일**: `apply_data_validation.py`  
**예상 소요**: 0.5일

---

#### B. 조건부 서식 (Conditional Formatting)
**목적**: 시각적 데이터 구분

**적용 내용**:
| 조건 | 색상 | 효과 |
|------|------|------|
| 배정완료 | 연한 초록 | 즉시 확인 |
| 미배정 | 연한 빨강 | 주의 환기 |
| 착공예정 | 연한 주황 | 진행 상태 |
| 건축허가 | 연한 파랑 | 허가 상태 |

**예상 효과**:
- 데이터 파악 시간 70% 단축
- 미배정 현장 즉시 식별
- 의사결정 속도 향상

**개발 파일**: `apply_conditional_formatting.py`  
**예상 소요**: 0.5일

---

#### C. VLOOKUP 수식 자동화
**목적**: 관련 데이터 자동 조회

**추가할 컬럼**:
```
현장정보 시트:
- 담당소장명 (담당소장ID → 인력풀 조회)
- 담당소장연락처 (담당소장ID → 인력풀 조회)
- 자격증명 (사용자격증ID → 자격증풀 조회)
- 자격증소유자명 (사용자격증ID → 자격증풀 조회)
- 자격증소유자연락처 (사용자격증ID → 자격증풀 조회)
```

**예상 효과**:
- 데이터 조회 시간 100% 단축 (즉시 표시)
- 중복 입력 제거
- 데이터 정합성 보장

**개발 파일**: `apply_formulas.py`  
**예상 소요**: 1일

---

### 2️⃣ 실시간 데이터 연동 API 개발

#### A. REST API 서버 구축
**기술 스택**:
- Framework: Flask
- Database: Google Sheets (via API)
- Protocol: HTTP/REST

**제공할 엔드포인트**:

```
GET  /api/sites              # 현장 목록 조회
GET  /api/sites/{id}         # 현장 상세 조회
PUT  /api/sites/{id}         # 현장 정보 수정
POST /api/sites/{id}/assign  # 소장 배정

GET  /api/personnel          # 인력 목록 조회
GET  /api/certificates       # 자격증 목록 조회
GET  /api/stats              # 통계 정보
```

**예상 효과**:
- HTML 앱에서 실시간 데이터 조회
- 데이터 수정 API 제공
- 다중 클라이언트 지원

**개발 파일**: `sheets_to_app_api.py`  
**예상 소요**: 2일

---

#### B. 실시간 동기화 메커니즘
**기술**: 낙관적 잠금 (Optimistic Locking)

**동작 방식**:
1. 데이터 읽기 시 버전 번호 함께 반환
2. 수정 요청 시 버전 번호 확인
3. 버전 불일치 시 충돌 알림
4. 사용자가 최신 데이터 확인 후 재시도

**예상 효과**:
- 데이터 충돌 방지
- 다중 사용자 안전한 동시 작업
- 변경 이력 추적

**개발 파일**: `sync_manager.py`  
**예상 소요**: 1일

---

### 3️⃣ HTML 앱 기능 확장

#### A. API 연동
**변경 사항**:
- 정적 데이터 → API 호출로 변경
- 실시간 데이터 로딩
- 자동 새로고침

**Before**:
```javascript
// 정적 데이터 사용
const sitesData = [...];
```

**After**:
```javascript
// API에서 데이터 가져오기
async function loadSitesData() {
    const response = await fetch('/api/sites');
    return await response.json();
}
```

**예상 소요**: 1일

---

#### B. 소장 배정 UI 개발
**새로운 기능**:
- 미배정 현장 클릭 시 배정 패널 표시
- 투입가능 소장 목록 표시
- 사용가능 자격증 목록 표시
- 원클릭 배정 기능

**UI 구성**:
```
[소장 배정 패널]
├─ 현장 정보
│  └─ 현장명, 주소, 착공예정일
├─ 소장 선택 (드롭다운)
│  └─ 투입가능한 소장 목록
├─ 자격증 선택 (드롭다운)
│  └─ 사용가능한 자격증 목록
└─ [배정 확인] 버튼
```

**예상 효과**:
- 배정 프로세스 간소화
- 현장에서 즉시 배정 가능
- 배정 시간 80% 단축

**예상 소요**: 1일

---

#### C. 실시간 업데이트 UI
**기술**: Server-Sent Events (SSE)

**동작 방식**:
1. 서버에서 데이터 변경 감지
2. 연결된 모든 클라이언트에 알림
3. 클라이언트 자동 새로고침

**예상 효과**:
- 여러 사용자가 동시 사용 시 즉시 반영
- 페이지 새로고침 불필요
- 협업 효율성 향상

**예상 소요**: 1일

---

## 📅 개발 일정

### 주차별 계획

**Week 1 (1일-2일차)**
- ✅ 데이터 검증 규칙 적용
- ✅ 조건부 서식 적용
- ✅ VLOOKUP 수식 추가

**Week 2 (3일-5일차)**
- ✅ Flask API 서버 개발
- ✅ 데이터 조회 API 구현
- ✅ 데이터 수정 API 구현

**Week 3 (6일-8일차)**
- ✅ HTML 앱 API 연동
- ✅ 소장 배정 UI 개발
- ✅ 실시간 동기화 구현

**Week 4 (9일-10일차)**
- ✅ 통합 테스트
- ✅ 버그 수정
- ✅ 문서화

### 마일스톤

| 마일스톤 | 완료 조건 | 예상일 |
|---------|---------|--------|
| MS1: Google Sheets 고급화 | 검증/서식/수식 100% 적용 | 2일차 |
| MS2: API 서버 구축 | 모든 엔드포인트 정상 작동 | 5일차 |
| MS3: 앱 연동 완료 | 실시간 조회/수정 가능 | 8일차 |
| MS4: 프로젝트 완료 | 테스트 100% 통과 | 10일차 |

---

## 💰 소요 자원

### 개발 인력
- **백엔드 개발**: 1명 (Python/Flask)
- **프론트엔드 개발**: 1명 (HTML/JS)
- **QA 테스터**: 1명 (통합 테스트)
- **총 인원**: 3명

### 기술 스택
- **언어**: Python 3.x, JavaScript ES6+
- **프레임워크**: Flask, Vanilla JS
- **API**: Google Sheets API v4
- **도구**: Git, VS Code/Cursor

### 외부 서비스
- **Google Cloud Platform**: Google Sheets API (무료)
- **호스팅**: 로컬 서버 (개발 단계)
- **비용**: $0 (무료 범위 내)

---

## 🎯 성공 기준 (KPI)

### 정량적 지표

| 지표 | 현재 | 목표 | 측정 방법 |
|------|------|------|----------|
| 데이터 입력 오류율 | 15% | <1% | 검증 규칙 적용 후 측정 |
| 데이터 조회 시간 | 5분 | <10초 | API 응답 시간 측정 |
| 배정 소요 시간 | 30분 | <5분 | UI 사용 시간 측정 |
| 시스템 가용성 | - | 99.9% | 서버 업타임 모니터링 |
| API 응답 시간 | - | <500ms | 평균 응답 시간 |

### 정성적 지표
- ✅ 사용자 만족도 (5점 만점)
- ✅ 시스템 안정성
- ✅ 데이터 일관성
- ✅ 유지보수 용이성

---

## 🔒 리스크 관리

### 식별된 리스크

| 리스크 | 발생 확률 | 영향도 | 대응 방안 |
|--------|----------|--------|----------|
| Google Sheets API 할당량 초과 | 중간 | 높음 | 캐싱 도입, 요청 최적화 |
| 데이터 충돌 발생 | 낮음 | 중간 | 낙관적 잠금 구현 |
| 네트워크 지연 | 중간 | 중간 | 로컬 캐싱, 오프라인 모드 |
| 개발 일정 지연 | 중간 | 중간 | 우선순위 조정, 인력 증원 |

### 리스크 완화 전략
1. **API 할당량**: 분당 60회 → 캐싱으로 분당 10회 이하로 감소
2. **데이터 충돌**: 버전 관리 시스템 도입
3. **네트워크**: 로컬 캐시 + 오프라인 모드
4. **일정 관리**: 주간 진척도 체크, 우선순위 재조정

---

## 📈 예상 효과

### 업무 효율성 개선

**배정 프로세스**:
- Before: 수동 입력 → 확인 → 연락 → 배정 (30분)
- After: 앱에서 클릭 → 즉시 배정 (5분)
- **개선율**: 83% ↓

**데이터 조회**:
- Before: Google Sheets 열기 → 검색 → 확인 (5분)
- After: 앱에서 즉시 조회 (10초)
- **개선율**: 97% ↓

**데이터 정확도**:
- Before: 수동 입력 오류율 15%
- After: 자동 검증 오류율 <1%
- **개선율**: 93% ↓

### ROI 분석

**시간 절감**:
- 일일 배정 작업: 10건 × 25분 절감 = 250분/일
- 월간 절감: 250분 × 20일 = 5,000분 (83시간)
- 연간 절감: 83시간 × 12개월 = 996시간

**비용 절감**:
- 인건비 절감: 996시간 × 시급 = 상당한 절감 효과
- 오류 수정 비용 감소
- 의사결정 속도 향상

---

## 📝 다음 액션 아이템

### 즉시 실행 (금일)
1. ✅ **데이터 검증 규칙 스크립트 개발 시작**
   - 파일: `apply_data_validation.py`
   - 담당: 백엔드 개발자
   - 예상: 0.5일

2. ✅ **조건부 서식 스크립트 개발 시작**
   - 파일: `apply_conditional_formatting.py`
   - 담당: 백엔드 개발자
   - 예상: 0.5일

### 이번 주 (1-2일차)
3. ✅ **VLOOKUP 수식 스크립트 개발**
   - 파일: `apply_formulas.py`
   - 담당: 백엔드 개발자
   - 예상: 1일

4. ✅ **Flask API 서버 기본 구조 작성**
   - 파일: `sheets_to_app_api.py`
   - 담당: 백엔드 개발자
   - 예상: 1일

### 다음 주 (3-5일차)
5. ✅ **API 엔드포인트 전체 구현**
6. ✅ **실시간 동기화 메커니즘 구현**
7. ✅ **HTML 앱 API 연동**

---

## 🎓 학습 및 준비사항

### 개발팀 준비
1. **Flask 프레임워크 학습** (1-2시간)
   - 라우팅, 요청/응답 처리
   - CORS 설정
   - 에러 핸들링

2. **Google Sheets API 고급 기능** (2-3시간)
   - 데이터 검증 API
   - 조건부 서식 API
   - 배치 업데이트

3. **JavaScript Fetch API** (1시간)
   - GET/POST/PUT 요청
   - 비동기 처리
   - 에러 핸들링

---

## 📚 참고 문서

### 기존 문서
- Phase 1 개발일지
- DB 구조 설계
- Google Sheets 구축 가이드
- API 사용 가이드

### 새로 작성할 문서
- API 상세 문서 (Swagger/OpenAPI)
- 배포 가이드
- 사용자 매뉴얼
- Phase 2 개발일지

---

## ✅ 승인 요청

### 승인 항목
- [ ] Phase 2 개발 계획 승인
- [ ] 개발 일정 승인 (6-10일)
- [ ] 인력 배정 승인 (3명)
- [ ] 기술 스택 승인

### 기대 결과
- ✅ 완전한 실시간 데이터베이스 시스템
- ✅ 양방향 데이터 연동
- ✅ 업무 효율 80% 이상 향상
- ✅ 데이터 정확도 99% 이상

---

## 📞 연락처

**프로젝트 매니저**: [이름]  
**기술 리드**: [이름]  
**문의**: [이메일]

---

**보고서 작성일**: 2026년 1월 6일  
**버전**: 1.0  
**상태**: 승인 대기중 ⏳

---

## 📎 첨부 문서

1. 다음단계_개발계획.md (상세 기술 설계)
2. 개발일지.md (Phase 1 완료 보고)
3. DB_구조_설계.md (데이터베이스 구조)
4. API_설계_초안.md (API 명세서 초안)


# 개발일지 2026-01-30 - 프로젝트 전체 현황

**작성일**: 2026년 1월 30일  
**작성자**: 개발팀  
**상태**: 진행 중

---

## 📋 프로젝트 개요

### 프로젝트명
현장배정 관리 시스템 (배정관리 앱)

### 목표
건설 현장의 소장 및 자격증 배정을 효율적으로 관리하는 웹 애플리케이션 개발

### GitHub 저장소
- **메인 저장소**: https://github.com/Siyeolryu/dujon
- **참고 저장소**: https://github.com/Siyeolryu/Ai_study/tree/main/moduler%20box

---

## 🏗️ 전체 개발 로드맵

```
Phase 1: 데이터베이스 구축 ✅ 완료
    ↓
Phase 2: 시스템 고도화 🔄 진행 중
    ├─ 1단계: Google Sheets 고급 기능 🔄 진행 중
    ├─ 2단계: REST API 서버 개발 ⏳ 예정
    ├─ 3단계: HTML 앱 개선 ⏳ 예정
    └─ 4단계: 배포 및 테스트 ⏳ 예정
    ↓
Phase 3: 운영 및 확장 ⏳ 예정
```

---

## ✅ Phase 1 완료 사항 (2026년 1월 초)

### 1. Google Sheets API 연동
- OAuth2 인증 구현 완료
- Google Sheets API v4 연동 완료
- `token.pickle` 파일로 인증 토큰 관리

### 2. 데이터베이스 구축
- **스프레드시트 ID**: `15fAEzkC9FCLA6sG1N--f69r-32WHoYLvmXcwED5xWzM`
- **총 업로드 데이터**: 1,182개 셀 (100% 성공)

| 시트명 | 내용 | 데이터 수 |
|--------|------|----------|
| 시트1 | 현장정보 | 31개 현장 |
| 시트2 | 인력풀 | 21명 |
| 시트3 | 자격증풀 | 31개 |

### 3. 기본 HTML 앱 개발
- `site-management.html`: 현장 관리 메인 페이지
- `app.js`: 애플리케이션 로직
- `data.js`: 데이터 관리
- `style.css`: 스타일시트

### 4. 작성된 문서
- `DB_구조_설계.md`: 데이터베이스 구조 설계서
- `Google_Sheets_구축가이드.md`: Google Sheets 설정 가이드

---

## 🔄 Phase 2 진행 현황 (현재)

### 착수일: 2026년 1월 6일

### Phase 2 목표
> "Google Sheets를 완전한 실시간 데이터베이스로 전환하고, HTML 앱과 양방향 연동"

### 1단계: Google Sheets 고급 기능 적용

#### 1-1. 데이터 검증 규칙 (Data Validation)
**상태**: ✅ 스크립트 개발 완료

**개발 파일**: `apply_data_validation.py`

**적용 내용**:
| 시트 | 컬럼 | 검증 유형 | 값 |
|------|------|----------|-----|
| 시트1 | C열 (회사구분) | 드롭다운 | 더존종합건설, 더존하우징 |
| 시트1 | J열 (현장상태) | 드롭다운 | 건축허가, 착공예정, 착공중, 준공 |
| 시트1 | O열 (배정상태) | 드롭다운 | 배정완료, 미배정 |
| 시트1 | G,H,I,P,Q열 | 날짜 형식 | YYYY-MM-DD |
| 시트2 | C열 (직책) | 드롭다운 | 소장, 사무실장, 사무직원, 기타 |
| 시트2 | H열 (현재상태) | 드롭다운 | 투입가능, 투입중, 휴가, 퇴사 |
| 시트2 | E열 (연락처) | 전화번호 | 010-XXXX-XXXX |
| 시트3 | J열 (사용가능여부) | 드롭다운 | 사용가능, 사용중, 만료 |
| 시트3 | F열 (연락처) | 전화번호 | 010-XXXX-XXXX |

**총 18개 검증 규칙 준비 완료**

#### 1-2. 조건부 서식 (Conditional Formatting)
**상태**: 📝 가이드 문서 작성 완료

**가이드 파일**: `1-2_조건부서식_가이드.md`

**예정 적용 내용**:
| 조건 | 색상 | 대상 |
|------|------|------|
| 배정완료 | 연한 초록 (#d9ead3) | 시트1 O열 |
| 미배정 | 연한 빨강 (#f4cccc) | 시트1 O열 |
| 건축허가 | 연한 파랑 (#cfe2f3) | 시트1 J열 |
| 착공예정/착공중 | 연한 주황 (#fce5cd) | 시트1 J열 |
| 준공 | 연한 초록 (#d9ead3) | 시트1 J열 |
| 투입가능 | 연한 초록 | 시트2 H열 |
| 투입중 | 연한 노랑 | 시트2 H열 |

#### 1-3. VLOOKUP 수식 자동화
**상태**: 📝 가이드 문서 작성 완료

**가이드 파일**: `1-3_VLOOKUP수식_가이드.md`

**예정 추가 컬럼**:
- 담당소장명 (담당소장ID → 인력풀 조회)
- 담당소장연락처 (담당소장ID → 인력풀 조회)
- 자격증명 (사용자격증ID → 자격증풀 조회)
- 자격증소유자명 (사용자격증ID → 자격증풀 조회)
- 자격증소유자연락처 (사용자격증ID → 자격증풀 조회)

---

### 2단계: REST API 서버 개발
**상태**: ⏳ 예정

**가이드 파일**:
- `2-1_데이터조회API_가이드.md`
- `2-2_데이터수정API_가이드.md`
- `Phase2_2단계_개요.md`

**기술 스택**:
- Framework: Flask
- Database: Google Sheets (via API)
- Protocol: HTTP/REST

**예정 엔드포인트**:
```
GET  /api/sites              # 현장 목록 조회
GET  /api/sites/{id}         # 현장 상세 조회
PUT  /api/sites/{id}         # 현장 정보 수정
POST /api/sites/{id}/assign  # 소장 배정
GET  /api/personnel          # 인력 목록 조회
GET  /api/certificates       # 자격증 목록 조회
GET  /api/stats              # 통계 정보
```

---

### 3단계: HTML 앱 개선
**상태**: ⏳ 예정

**예정 기능**:
- 정적 데이터 → API 호출로 변경
- 실시간 데이터 로딩
- 소장 배정 UI 개발
- 미배정 현장 클릭 시 배정 패널 표시
- 투입가능 소장/자격증 목록 표시

---

### 4단계: 배포 및 테스트
**상태**: ⏳ 예정

**예정 작업**:
- 로컬 서버 설정
- CORS 및 보안 설정
- 통합 테스트

---

## 📁 현재 프로젝트 파일 구조

```
배정관리 앱/
├── 📄 site-management.html    # 현장 관리 메인 페이지
├── 📄 app.js                  # 애플리케이션 로직
├── 📄 data.js                 # 데이터 관리
├── 📄 style.css               # 스타일시트
│
├── 📄 apply_data_validation.py # 데이터 검증 규칙 적용 스크립트
│
├── 📋 DB_구조_설계.md          # 데이터베이스 구조 설계서
├── 📋 Google_Sheets_구축가이드.md # Google Sheets 설정 가이드
│
├── 📋 Phase2_착수보고서.md     # Phase 2 착수 보고서
├── 📋 다음단계_개발계획.md     # Phase 2 개발 계획 상세
├── 📋 Phase2_1단계_실행가이드.md # Phase 2-1단계 실행 가이드
├── 📋 Phase2_2단계_개요.md     # Phase 2-2단계 개요
│
├── 📋 1-1_데이터검증규칙_가이드.md # 데이터 검증 가이드
├── 📋 1-2_조건부서식_가이드.md    # 조건부 서식 가이드
├── 📋 1-3_VLOOKUP수식_가이드.md  # VLOOKUP 수식 가이드
├── 📋 2-1_데이터조회API_가이드.md # 데이터 조회 API 가이드
├── 📋 2-2_데이터수정API_가이드.md # 데이터 수정 API 가이드
│
├── 📊 현장정보_샘플데이터.csv    # 현장 샘플 데이터
├── 📊 인력풀_샘플데이터.csv      # 인력 샘플 데이터
├── 📊 자격증풀_샘플데이터.csv    # 자격증 샘플 데이터
│
└── 📁 개발일지/
    ├── 📋 README.md                      # 개발일지 소개
    └── 📋 개발일지_2026-01-30_프로젝트현황.md  # 현재 파일
```

---

## 📊 KPI 및 목표

### 정량적 목표

| 지표 | 현재 | 목표 | 상태 |
|------|------|------|------|
| 데이터 입력 오류율 | 15% | <1% | ⏳ 진행 예정 |
| 데이터 조회 시간 | 5분 | <10초 | ⏳ 진행 예정 |
| 배정 소요 시간 | 30분 | <5분 | ⏳ 진행 예정 |
| API 응답 시간 | - | <500ms | ⏳ 진행 예정 |

### 정성적 목표
- [ ] 실시간 데이터 연동
- [ ] 직관적인 시각적 구분 (색상 코딩)
- [ ] 사용자 친화적 배정 UI
- [ ] 데이터 일관성 100% 보장

---

## 🔧 기술 스택

### 프론트엔드
- HTML5
- CSS3
- JavaScript (ES6+)
- Vanilla JS (프레임워크 미사용)

### 백엔드 (예정)
- Python 3.x
- Flask
- Google Sheets API v4

### 데이터베이스
- Google Sheets (클라우드 기반)
- 스프레드시트 형태의 관계형 데이터 구조

### 인증
- OAuth 2.0 (Google API)

---

## ⏭️ 다음 단계

### 즉시 실행 항목
1. [ ] `apply_data_validation.py` 실행하여 검증 규칙 적용
2. [ ] `apply_conditional_formatting.py` 개발 및 실행
3. [ ] `apply_vlookup_formulas.py` 개발 및 실행

### 이번 주 목표
1. [ ] Phase 2 - 1단계 완료 (Google Sheets 고급 기능)
2. [ ] Flask API 서버 기본 구조 작성

### 다음 주 목표
1. [ ] Phase 2 - 2단계 완료 (REST API 개발)
2. [ ] HTML 앱 API 연동 시작

---

## 📝 특이사항 및 이슈

### 해결된 이슈
- ✅ Google Sheets API 인증 문제 해결
- ✅ CSV 한글 인코딩 문제 해결 (UTF-8)
- ✅ Windows 환경 호환성 처리

### 진행 중인 이슈
- 없음

### 잠재적 리스크
- Google Sheets API 할당량 초과 가능성 (캐싱으로 대응 예정)
- 다중 사용자 동시 편집 시 충돌 (낙관적 잠금으로 대응 예정)

---

## 📞 참고 링크

### 공식 문서
- [Google Sheets API](https://developers.google.com/sheets/api)
- [Flask Documentation](https://flask.palletsprojects.com/)

### 프로젝트 저장소
- [dujon Repository](https://github.com/Siyeolryu/dujon)
- [Ai_study Reference](https://github.com/Siyeolryu/Ai_study/tree/main/moduler%20box)

---

**다음 개발일지 작성 예정일**: Phase 2-1단계 완료 시점

---

*이 문서는 프로젝트 진행 상황에 따라 지속적으로 업데이트됩니다.*
